<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JavaScript Libraries Demo</title>

  <!-- Load Popular JavaScript Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    .chart-container { width: 300px; height: 300px; margin: auto; }
    .box { width: 100px; height: 100px; background-color: coral; margin: auto; }
    canvas { display: block; margin: auto; }
  </style>
</head>
<body>
  <h1>JavaScript Libraries Demo</h1>
  <p id="note" style="color: red; font-style: italic;"></p>
  <div id="user-data"></div>
  <p id="date"></p>
  <div class="chart-container">
    <canvas id="chart"></canvas>
  </div>
  <svg width="400" height="100"></svg>
  <div class="box"></div>
  <div id="3d-container"></div>

  <script>
    // ⚠️ CORS Warning (displayed only if served as a local file)
    if (location.protocol === "file:") {
      document.getElementById("note").innerText =
        "⚠️ Note: You may encounter CORS issues with APIs when opening this file locally. Try running it with a local server (e.g., Live Server or http-server).";
    }

    // 📦 jQuery AJAX Request
    $(document).ready(() => {
      $.get("https://randomuser.me/api/", (data) => {
        let user = data.results[0];
        $("#user-data").html(`<h3>${user.name.first} ${user.name.last}</h3>`);
      });
    });

    // 📦 Axios HTTP Request (console log only)
    axios.get("https://randomuser.me/api/")
      .then(response => console.log("Axios User:", response.data.results[0]));

    // 📦 Native Fetch API (console log only)
    fetch("https://randomuser.me/api/")
      .then(res => res.json())
      .then(data => console.log("Fetch User:", data.results[0]));

    // 📦 Lodash Utility
    console.log("Lodash chunk:", _.chunk([1, 2, 3, 4, 5], 2));

    // 📦 Moment.js Date
    document.getElementById("date").innerText =
      "Date: " + moment().format("MMMM Do YYYY, h:mm:ss a");

    // 📦 Chart.js Visualization
    new Chart(document.getElementById("chart"), {
      type: 'bar',
      data: {
        labels: ["Red", "Blue", "Yellow"],
        datasets: [{
          data: [10, 20, 30],
          backgroundColor: ["red", "blue", "yellow"]
        }]
      }
    });

    // 📦 D3.js SVG Circle
    d3.select("svg")
      .append("circle")
      .attr("cx", 50).attr("cy", 50).attr("r", 40)
      .style("fill", "green");

    // 📦 GSAP Animation
    gsap.to(".box", {
      duration: 2,
      x: 200,
      backgroundColor: "blue",
      repeat: -1,
      yoyo: true
    });

    // 📦 Anime.js Rotation Animation
    anime({
      targets: ".box",
      rotate: '1turn',
      duration: 2000,
      easing: "easeInOutSine",
      loop: true
    });

    // 📦 Three.js – Render a Rotating 3D Cube
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer();
    renderer.setSize(300, 300);
    document.getElementById("3d-container").appendChild(renderer.domElement);

    let geometry = new THREE.BoxGeometry();
    let material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
    let cube = new THREE.Mesh(geometry, material);
    scene.add(cube);
    camera.position.z = 5;

    function animateCube() {
      requestAnimationFrame(animateCube);
      cube.rotation.x += 0.01;
      cube.rotation.y += 0.01;
      renderer.render(scene, camera);
    }
    animateCube();
  </script>
</body>
</html>
