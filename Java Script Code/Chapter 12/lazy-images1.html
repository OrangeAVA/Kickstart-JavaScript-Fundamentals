<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lazy Loading Images Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
      height: 2000px; /* Ensures scrolling */
      background-color: #f4f4f4;
    }

    img {
      width: 100%;
      max-width: 600px;
      margin: 20px 0;
      display: block;
      height: auto;
    }

    .lazy {
      background-color: #e0e0e0;
      height: 200px; /* Placeholder height before image loads */
      filter: blur(5px);
      transition: filter 0.3s ease;
    }

    .lazy-loaded {
      filter: blur(0);
    }
  </style>
</head>
<body>
  <h1>Lazy Loading Images</h1>

  <!-- Lazy-loaded images with data-src for actual image sources -->
  <img data-src="https://picsum.photos/600/400?text=Image+1" alt="Lazy Loaded Image 1" class="lazy" loading="lazy">
  <img data-src="https://picsum.photos/600/400?text=Image+2" alt="Lazy Loaded Image 2" class="lazy" loading="lazy">
  <img data-src="https://picsum.photos/600/400?text=Image+3" alt="Lazy Loaded Image 3" class="lazy" loading="lazy">
  <img data-src="https://picsum.photos/600/400?text=Image+4" alt="Lazy Loaded Image 4" class="lazy" loading="lazy">
  <img data-src="https://picsum.photos/600/400?text=Image+5" alt="Lazy Loaded Image 5" class="lazy" loading="lazy">
  <img data-src="https://picsum.photos/600/400?text=Image+6" alt="Lazy Loaded Image 6" class="lazy" loading="lazy">

  <script>
    const lazyImages = document.querySelectorAll('img.lazy');

    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          const actualSrc = img.getAttribute('data-src');

          // Only set src if not already set
          if (actualSrc) {
            img.src = actualSrc;
            img.classList.remove('lazy');
            img.classList.add('lazy-loaded');
            observer.unobserve(img); // Stop observing once loaded
          }
        }
      });
    }, {
      threshold: 0.1 // Image becomes visible when 10% of it enters the viewport
    });

    lazyImages.forEach(img => imageObserver.observe(img));
  </script>
</body>
</html>
